# This file is generated by Nx.
#
# Build the docker image with `npx nx docker-build @maesn-mcp/maesn-mcp`.
# Tip: Modify "docker-build" options in project.json to change docker build args.
#
# Run the container with `docker run -p 3000:3000 -t maesn-mcp-maesn-mcp`.
FROM docker.io/node:lts-alpine

ENV HOST=0.0.0.0
ENV PORT=3000

WORKDIR /app

RUN addgroup --system maesn-mcp-maesn-mcp && \
          adduser --system -G maesn-mcp-maesn-mcp maesn-mcp-maesn-mcp

COPY apps/maesn-mcp/dist maesn-mcp-maesn-mcp/
COPY apps/maesn-mcp/package.json maesn-mcp-maesn-mcp/
RUN chown -R maesn-mcp-maesn-mcp:maesn-mcp-maesn-mcp .

# You can remove this install step if you build with `--bundle` option.
# The bundled output will include external dependencies.
RUN npm --prefix maesn-mcp-maesn-mcp --omit=dev -f install

CMD [ "node", "maesn-mcp-maesn-mcp" ]
